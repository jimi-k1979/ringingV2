{% extends "base.twig" %}

{% block title %}Event archive - results{% endblock %}

{% block nav %}
    {% include ('allPages/nav.twig') %}
{% endblock %}

{% block mainBody %}
    <div class="col blog-main">
        <h1 class="blog-post-title">
            Event details: {{ event.competitionName }} {{ event.eventYear }}
        </h1>
        {% if event.isUnusualLocation %}
            <h2>Held at {{ event.eventLocation }}</h2>
        {% endif %}
        <div class="blog-post">
            <div class="row">
                <div class="col-md-8 align-self-center">
                    <h3>Results</h3>
                    <table class="table table-striped table-light">
                        <thead>
                        <tr>
                            <th>Position</th>
                            {% if event.pealNumbers %}
                                <th>Peal Number</th>
                            {% endif %}
                            <th>Faults</th>
                            <th>Team</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for result in event.results %}
                            <tr>
                                <td>{{ result.position }}</td>
                                {% if event.pealNumbers %}
                                    <td>{{ result.pealNumber }}</td>
                                {% endif %}
                                <td class="fault-field">{{ result.faults }}</td>
                                <td>
                                    <a href="team/team.php?teamId={{ result.teamId }}">
                                        {{ result.team }}
                                    </a>
                                </td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                    <div class="row">
                        <div class="col-12">
                            <h3>Event statistics</h3>
                        </div>
                        <div class="row">
                            <div class="col-4">
                                <h5>Total faults</h5>
                            </div>
                            <div class="col-4">
                                <h5>Average Faults</h5>
                            </div>
                            <div class="col-4">
                                <h5>Winning Margin</h5>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    {% if event.judges is not empty %}
                        <div id="judges-section">
                            <h3>Judges</h3>
                        </div>
                    {% endif %}
                    {% if event.winningTeam is not empty %}
                        <div id="winning-team-section">
                            <h3>Winning Team</h3>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block scripts %}
    {{ parent() }}
    <script type="application/javascript"
            src="/assets/js/event.js"
    ></script>
{% endblock %}
